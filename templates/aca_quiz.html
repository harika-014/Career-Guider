<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Academic Career Ability Quiz</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    :root {
      --primary-color: #1e88e5;
      --secondary-color: #f8f9fc;
      --accent-color: #64b5f6;
      --text-color: #4a4a4a;
      --dark-color: #1565c0;
    }
    body {
      background-color: #f8f9fa;
      font-family: 'Nunito', sans-serif;
      color: var(--text-color);
      padding-top: 20px;
    }
    .quiz-container { max-width: 800px; margin: 0 auto; }
    .card {
      margin-bottom: 20px;
      box-shadow: 0 0.15rem 1.75rem 0 rgba(0,0,0,0.15);
      border: none; border-radius: 10px;
    }
    .card-header {
      background: linear-gradient(135deg, var(--primary-color), var(--dark-color));
      color: white; border-radius: 10px 10px 0 0 !important; font-weight: 600;
    }
    .btn-primary {
      background: linear-gradient(to right, var(--primary-color), var(--dark-color));
      border: none; border-radius: 30px; padding: 10px 25px; font-weight: 600;
    }
    .btn-primary:hover {
      background: linear-gradient(to right, var(--dark-color), var(--primary-color));
      transform: translateY(-2px);
      box-shadow: 0 4px 8px rgba(0,0,0,0.2);
    }
    .btn-secondary {
      background: rgba(148,163,184,.2);
      color: var(--text-color);
      border: none; border-radius: 30px; padding: 10px 25px; font-weight: 600;
    }
    .progress { height: 10px; margin-bottom: 20px; }
    .option-btn {
      text-align: left; margin-bottom: 10px; padding: 15px;
      border: 1px solid #dee2e6; border-radius: 8px; transition: all 0.3s;
      background-color: white; width: 100%;
    }
    .option-btn:hover { background-color: #f8f9fa; border-color: var(--primary-color); }
    .option-btn.selected {
      background-color: var(--primary-color);
      color: white; border-color: var(--primary-color);
    }
    input[type="radio"] { margin-right: 10px; }
    .badge { font-size: 0.9rem; padding: 8px 12px; }
    .result-card { text-align: center; padding: 2rem; }
    .footer {
      background: linear-gradient(135deg, var(--primary-color), var(--dark-color));
      color: white; padding: 1rem 0; margin-top: 2rem; border-radius: 0 0 10px 10px;
    }
  </style>
</head>
<body>
  <div class="container quiz-container">
    <div class="card" id="app">
      <div class="card-header d-flex justify-content-between align-items-center">
        <h1 class="h4 mb-0"><i class="fas fa-graduation-cap me-2"></i>Academic Career Ability Quiz</h1>
        <div style="display:flex;gap:10px;align-items:center">
          <span class="badge bg-info"><span id="counter">Q 1 / 20</span></span>
          <span class="badge bg-warning"><span id="timer">05:00</span></span>
        </div>
      </div>
      <div class="card-body">
        <div class="progress"><div class="progress-bar" id="bar" role="progressbar" style="width:0%"></div></div>
        <div id="quizPane"></div>
      </div>
      <div class="footer text-center">
        <small>Tip: This quiz helps identify your academic strengths and learning style.</small>
      </div>
    </div>
  </div>

  <script>
    const QUIZ_MINUTES = 5;
    const HIGH_GUIDANCE_URL = "/aca1";
    const LOW_GUIDANCE_URL  = "/aca2";
    const AUTO_REDIRECT = true;

    const questions = [
      // --- Technical (scored) ---
      { text: "Which of these subjects is part of STEM?", options: ["History", "Biology", "Geography", "Civics"], correctIndex: 1 },
      { text: "Which branch of science studies matter and energy?", options: ["Biology", "Chemistry", "Physics", "Mathematics"], correctIndex: 2 },
      { text: "Which number is a prime number?", options: ["9", "21", "23", "25"], correctIndex: 2 },
      { text: "Who proposed the theory of relativity?", options: ["Newton", "Einstein", "Galileo", "Bohr"], correctIndex: 1 },
      { text: "Which planet is known as the Red Planet?", options: ["Earth", "Venus", "Mars", "Jupiter"], correctIndex: 2 },
      { text: "What is the capital of Japan?", options: ["Beijing", "Tokyo", "Seoul", "Kyoto"], correctIndex: 1 },
      { text: "Which part of the computer is considered its brain?", options: ["CPU", "Keyboard", "Monitor", "Mouse"], correctIndex: 0 },
      { text: "If 5x = 20, then x equals:", options: ["2", "4", "5", "10"], correctIndex: 1 },
      { text: "Which of these is not a renewable energy source?", options: ["Wind", "Solar", "Coal", "Hydro"], correctIndex: 2 },
      { text: "Who wrote 'A Brief History of Time'?", options: ["Stephen Hawking", "Isaac Newton", "Albert Einstein", "Nikola Tesla"], correctIndex: 0 },

      // --- Personality (unscored) ---
      { text: "Which subject do you enjoy the most?", options: ["Math", "Science", "History", "Languages"], correctIndex: null },
      { text: "When studying, you prefer to:", options: ["Take notes neatly", "Understand concepts deeply", "Memorize key points", "Practice with problems"], correctIndex: null },
      { text: "You work best when:", options: ["Alone", "In a group", "With a mentor", "Under pressure"], correctIndex: null },
      { text: "Your biggest motivation to study is:", options: ["Grades", "Curiosity", "Competition", "Future goals"], correctIndex: null },
      { text: "What type of learner are you?", options: ["Visual", "Auditory", "Reading/Writing", "Kinesthetic"], correctIndex: null },
      { text: "You find exams:", options: ["Stressful", "Challenging", "Exciting", "Manageable"], correctIndex: null },
      { text: "When facing a tough subject, you:", options: ["Avoid it", "Ask for help", "Keep practicing", "Find shortcuts"], correctIndex: null },
      { text: "Which career interests you most?", options: ["Teaching", "Engineering", "Research", "Administration"], correctIndex: null },
      { text: "How do you usually prepare for tests?", options: ["Last-minute revision", "Planned schedule", "Group study", "Notes summary"], correctIndex: null },
      { text: "What‚Äôs your biggest academic strength?", options: ["Problem-solving", "Creativity", "Focus", "Consistency"], correctIndex: null },
    ];

    let idx = 0;
    const answers = new Array(questions.length).fill(null);
    const $ = q => document.querySelector(q);

    function render() {
      const q = questions[idx];
      const total = questions.length;
      const selected = answers[idx];
      $('#counter').textContent = `Q ${idx+1} / ${total}`;
      const pct = Math.round((idx/total)*100);
      $('#bar').style.width = `${pct}%`;

      const opts = q.options.map((op,i)=>`
        <button type="button" class="option-btn ${selected===i?'selected':''}" data-value="${i}">
          <input type="radio" name="opt" value="${i}" ${selected===i?'checked':''} /> ${op}
        </button>`).join('');

      const canPrev = idx>0, isLast = idx===total-1;
      $('#quizPane').innerHTML = `
        <div class="mb-2 text-muted">Section: ${q.correctIndex===null?'Personality':'Technical'}</div>
        <h4 class="mb-3">${q.text}</h4>
        <div class="mb-4">${opts}</div>
        <div class="d-flex justify-content-between align-items-center">
          <button class="btn btn-secondary" ${!canPrev?'disabled':''} id="prevBtn">Previous</button>
          <div class="text-muted">${q.correctIndex===null?'Choose what fits you.':'Select the correct answer.'}</div>
          <button class="btn btn-primary" id="nextBtn">${isLast?'Submit':'Next'}</button>
        </div>
        <div class="mt-3 small text-muted">Your choice is saved automatically.</div>`;

      $('#prevBtn')?.addEventListener('click', e=>{e.preventDefault(); saveSelection(); idx--; render();});
      $('#nextBtn')?.addEventListener('click', e=>{e.preventDefault(); saveSelection(); isLast?finish(): (idx++, render());});
      document.querySelectorAll('.option-btn').forEach(btn=>{
        btn.addEventListener('click', ()=>{
          document.querySelectorAll('.option-btn').forEach(b=>b.classList.remove('selected'));
          btn.classList.add('selected');
          btn.querySelector('input').checked=true;
          answers[idx]=Number(btn.dataset.value);
        });
      });
    }

    function saveSelection(){
      const picked=document.querySelector('input[name="opt"]:checked');
      if(picked) answers[idx]=Number(picked.value);
    }

    function computeScore(){
      let correct=0,total=0;
      questions.forEach((q,i)=>{
        if(q.correctIndex===null) return;
        total++;
        if(answers[i]===q.correctIndex) correct++;
      });
      const percent=Math.round((correct/total)*100);
      return {correct,total,percent};
    }

    function finish(){
      const {correct,total,percent}=computeScore();
      const high=percent>=70;
      const target=high?HIGH_GUIDANCE_URL:LOW_GUIDANCE_URL;
      $('#quizPane').innerHTML=`
        <div class="result-card">
          <h2>üéì Score: ${correct}/${total}</h2>
          <h3>Percentage: ${percent}%</h3>
          <p>${high?'‚úÖ Great academic ability! Redirecting to guidance...':'‚ùå Below 70%. Redirecting to guidance...'}</p>
          <div class="d-flex justify-content-center gap-3">
            <a class="btn btn-primary" id="goGuidance">Go to Guidance Page</a>
            <button class="btn btn-secondary" id="retryBtn">Restart Quiz</button>
          </div>
        </div>`;
      document.getElementById('goGuidance').addEventListener('click', e=>{
        e.preventDefault(); window.location.href=target;
      });
      document.getElementById('retryBtn').addEventListener('click', ()=>location.reload());
      if(AUTO_REDIRECT && target){
        setTimeout(()=>window.location.href=target,4000);
      }
      clearInterval(t);
    }

    let remaining=QUIZ_MINUTES*60;
    function updateTimer(){
      const m=String(Math.floor(remaining/60)).padStart(2,'0');
      const s=String(remaining%60).padStart(2,'0');
      $('#timer').textContent=`${m}:${s}`;
      if(remaining<=0){
        clearInterval(t);
        finish();
        return;}
      remaining--;
    }

    render(); updateTimer();
    const t=setInterval(updateTimer,1000);
  </script>
</body>
</html>
