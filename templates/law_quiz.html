<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Legal Career Ability Quiz</title>
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Font Awesome Icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    :root {
      --primary-color: #4e73df;
      --secondary-color: #f8f9fc;
      --accent-color: #36b9cc;
      --text-color: #5a5c69;
      --dark-color: #2e59d9;
    }
    
    body {
      background-color: #f8f9fa;
      font-family: 'Nunito', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
      color: var(--text-color);
      padding-top: 20px;
    }
    
    .quiz-container {
      max-width: 800px;
      margin: 0 auto;
    }
    
    .card {
      margin-bottom: 20px;
      box-shadow: 0 0.15rem 1.75rem 0 rgba(58, 59, 69, 0.15);
      border: none;
      border-radius: 10px;
    }
    
    .card-header {
      background: linear-gradient(135deg, var(--primary-color), var(--dark-color));
      color: white;
      border-radius: 10px 10px 0 0 !important;
      font-weight: 600;
    }
    
    .btn-primary {
      background: linear-gradient(to right, var(--primary-color), var(--dark-color));
      border: none;
      border-radius: 30px;
      padding: 10px 25px;
      font-weight: 600;
    }
    
    .btn-primary:hover {
      background: linear-gradient(to right, var(--dark-color), var(--primary-color));
      transform: translateY(-2px);
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }
    
    .btn-secondary {
      background: rgba(148,163,184,.2);
      color: var(--text-color);
      border: none;
      border-radius: 30px;
      padding: 10px 25px;
      font-weight: 600;
    }
    
    .progress {
      height: 10px;
      margin-bottom: 20px;
    }
    
    .option-btn {
      text-align: left;
      margin-bottom: 10px;
      padding: 15px;
      border: 1px solid #dee2e6;
      border-radius: 8px;
      transition: all 0.3s;
      background-color: white;
      width: 100%;
    }
    
    .option-btn:hover {
      background-color: #f8f9fa;
      border-color: var(--primary-color);
    }
    
    .option-btn.selected {
      background-color: var(--primary-color);
      color: white;
      border-color: var(--primary-color);
    }
    
    input[type="radio"] {
      margin-right: 10px;
    }
    
    .badge {
      font-size: 0.9rem;
      padding: 8px 12px;
    }
    
    .result-card {
      text-align: center;
      padding: 2rem;
    }
    
    .footer {
      background: linear-gradient(135deg, var(--primary-color), var(--dark-color));
      color: white;
      padding: 1rem 0;
      margin-top: 2rem;
      border-radius: 0 0 10px 10px;
    }
  </style>
</head>
<body>
  <div class="container quiz-container">
    <div class="card" id="app">
      <div class="card-header d-flex justify-content-between align-items-center">
        <h1 class="h4 mb-0"><i class="fas fa-gavel me-2"></i>Legal Career Ability Quiz</h1>
        <div style="display:flex;gap:10px;align-items:center">
          <span class="badge bg-info" title="Progress"><span id="counter">Q 1 / 20</span></span>
          <span class="badge bg-warning" title="Time left for full quiz"><span id="timer">05:00</span></span>
        </div>
      </div>
      
      <div class="card-body">
        <div class="progress">
          <div class="progress-bar" id="bar" role="progressbar" style="width: 0%" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
        </div>
        
        <div id="quizPane">
          <!-- Question will render here -->
        </div>
      </div>
      
      <div class="footer text-center">
        <small>Tip: This quiz helps assess your aptitude and interests in legal professions.</small>
      </div>
    </div>
  </div>

  <script>
    /********************
     * CONFIG
     ********************/
    const QUIZ_MINUTES = 5; // full quiz timer (minutes)

    // Guidance URLs based on score
    const HIGH_GUIDANCE_URL = "/law1";  // for >= 70%
    const LOW_GUIDANCE_URL  = "/law2";  // for < 70%

    // Auto-redirect after showing results for a few seconds
    const AUTO_REDIRECT = true;

    /********************
     * QUESTIONS BANK
     * - 20 total (10 legal knowledge scored + 10 personality unscored)
     * - Each option is a string. correctIndex is an integer for scored questions, or null for personality.
     ********************/
    const questions = [
      // --- Legal Knowledge (scored) ---
      {
        text: "What is the supreme law of the land in India?",
        options: ["Indian Penal Code", "Constitution of India", "Civil Procedure Code", "Criminal Procedure Code"],
        correctIndex: 1,
      },
      {
        text: "Which article of the Indian Constitution deals with Fundamental Rights?",
        options: ["Article 12-35", "Article 36-51", "Article 52-78", "Article 79-122"],
        correctIndex: 0,
      },
      {
        text: "What is the minimum age requirement to become a judge of the Supreme Court of India?",
        options: ["35 years", "40 years", "45 years", "No age limit"],
        correctIndex: 0,
      },
      {
        text: "Which writ is issued by a higher court to a lower court to transfer a case?",
        options: ["Habeas Corpus", "Certiorari", "Mandamus", "Quo Warranto"],
        correctIndex: 1,
      },
      {
        text: "The Law of Torts primarily deals with:",
        options: ["Criminal offenses", "Civil wrongs and damages", "Constitutional matters", "Property disputes"],
        correctIndex: 1,
      },
      {
        text: "What does 'IPC' stand for in Indian legal context?",
        options: ["Indian Police Code", "Indian Penal Code", "International Property Code", "Indian Parliament Code"],
        correctIndex: 1,
      },
      {
        text: "The concept of 'Rule of Law' was popularized by:",
        options: ["Mahatma Gandhi", "Jawaharlal Nehru", "A.V. Dicey", "B.R. Ambedkar"],
        correctIndex: 2,
      },
      {
        text: "Which amendment introduced the Fundamental Duties in the Indian Constitution?",
        options: ["42nd Amendment", "44th Amendment", "52nd Amendment", "61st Amendment"],
        correctIndex: 0,
      },
      {
        text: "The maximum period for which President's rule can be imposed in a state is:",
        options: ["6 months", "1 year", "3 years", "5 years"],
        correctIndex: 2,
      },
      {
        text: "What is 'res judicata' in legal terms?",
        options: ["A matter already judged", "New evidence", "Legal aid", "Court procedure"],
        correctIndex: 0,
      },

      // --- Personality & Aptitude (unscored) ---
      {
        text: "How do you approach analyzing complex documents?",
        options: ["Enjoy detailed analysis and interpretation", "Can do it when necessary", "Find it tedious and challenging", "Prefer to avoid such tasks"],
        correctIndex: null,
      },
      {
        text: "Which legal specialty interests you most?",
        options: ["Criminal Law - justice and prosecution", "Corporate Law - business and contracts", "Constitutional Law - rights and governance", "Family Law - personal and social issues"],
        correctIndex: null,
      },
      {
        text: "How do you handle debates and arguments?",
        options: ["Enjoy constructing logical arguments", "Comfortable presenting facts and evidence", "Prefer to avoid confrontation", "Get emotional and find it stressful"],
        correctIndex: null,
      },
      {
        text: "What aspect of legal work appeals to you most?",
        options: ["Courtroom advocacy and litigation", "Legal research and writing", "Client counseling and advice", "Policy making and reform"],
        correctIndex: null,
      },
      {
        text: "How do you feel about public speaking?",
        options: ["Confident and enjoy presenting", "Comfortable with preparation", "Nervous but can manage", "Avoid it whenever possible"],
        correctIndex: null,
      },
      {
        text: "Which work environment suits you best?",
        options: ["Fast-paced courtroom setting", "Research-oriented law library", "Corporate office with clients", "Government or public service"],
        correctIndex: null,
      },
      {
        text: "How important is ethical practice in your career?",
        options: ["Extremely important - foundation of profession", "Important - but practical considerations matter", "Moderately important", "Prefer to focus on winning cases"],
        correctIndex: null,
      },
      {
        text: "What motivates you to pursue law?",
        options: ["Passion for justice and rights", "Intellectual challenge and analysis", "Career prestige and opportunities", "Desire to help individuals"],
        correctIndex: null,
      },
      {
        text: "How do you handle ethical dilemmas?",
        options: ["Analyze from multiple perspectives carefully", "Follow established rules and precedents", "Rely on personal instincts and values", "Seek guidance from seniors"],
        correctIndex: null,
      },
      {
        text: "Which type of cases would you prefer?",
        options: ["High-profile public interest cases", "Complex corporate transactions", "Criminal defense or prosecution", "Civil rights and constitutional matters"],
        correctIndex: null,
      },
    ];

    // state
    let idx = 0;
    const answers = new Array(questions.length).fill(null); // stores selected option index

    // helpers
    const $ = (q) => document.querySelector(q);

    function render(){
      const q = questions[idx];
      const total = questions.length;
      const selected = answers[idx];

      // header counters
      $('#counter').textContent = `Q ${idx+1} / ${total}`;
      const pct = Math.round(((idx) / (total)) * 100);
      $('#bar').style.width = `${pct}%`;

      // question html
      const opts = q.options.map((op, i) => `
        <button type="button" class="option-btn ${selected===i? 'selected':''}" data-value="${i}">
          <input type="radio" name="opt" value="${i}" ${selected===i? 'checked':''} />
          ${op}
        </button>
      `).join('');

      const canPrev = idx>0;
      const isLast = idx === total-1;

      $('#quizPane').innerHTML = `
        <div class="mb-2 text-muted">Section: ${q.correctIndex===null? 'Personality & Aptitude' : 'Legal Knowledge'}</div>
        <h4 class="mb-3">${q.text}</h4>
        <div class="mb-4">${opts}</div>
        <div class="d-flex justify-content-between align-items-center">
          <button class="btn btn-secondary" ${!canPrev? 'disabled':''} id="prevBtn">Previous</button>
          <div class="text-muted">${q.correctIndex===null? 'No right/wrong here — choose what fits you.' : 'Choose one correct answer.'}</div>
          <button class="btn btn-primary" id="nextBtn">${isLast? 'Submit' : 'Next'}</button>
        </div>
        <div class="mt-3 text-muted small">Your choice is saved automatically when you click Next/Previous.</div>
      `;

      $('#prevBtn')?.addEventListener('click', (e)=>{ e.preventDefault(); saveSelection(); idx--; render(); });
      $('#nextBtn')?.addEventListener('click', (e)=>{ e.preventDefault(); saveSelection(); isLast ? finish() : (idx++, render()); });

      // handle change
      document.querySelectorAll('.option-btn').forEach(btn => {
        btn.addEventListener('click', (e)=>{
          // Remove selected class from all options
          document.querySelectorAll('.option-btn').forEach(b => b.classList.remove('selected'));
          // Add selected class to clicked option
          btn.classList.add('selected');
          // Update the radio button
          const radio = btn.querySelector('input[type="radio"]');
          radio.checked = true;
          // Save selection
          answers[idx] = Number(btn.getAttribute('data-value'));
        });
      });
    }

    function saveSelection(){
      const picked = document.querySelector('input[name="opt"]:checked');
      if(picked){ answers[idx] = Number(picked.value); }
    }

    function computeScore(){
      let correct = 0, total = 0;
      questions.forEach((q,i)=>{
        if(q.correctIndex===null) return; // unscored personality questions
        total++; // Only count legal knowledge questions for the total score
        if(answers[i] === q.correctIndex) correct++;
      });
      const percent = Math.round((correct/total)*100);
      return {correct, total, percent};
    }

    function finish(auto=false){
      const {correct, total, percent} = computeScore();
      const high = percent >= 70;

      // results UI - This will be shown briefly before redirecting
      $('#quizPane').innerHTML = `
        <div class="result-card">
          <h2 class="mb-3">🎯 Your Score: ${correct}/${total}</h2>
          <h3 class="mb-4">📊 Percentage: ${percent}%</h3>
          <p class="mb-4">${high ? '✅ You Passed! Great job! Redirecting to guidance...' : '❌ You Scored Below 70%. Redirecting to guidance...'}</p>
          <div class="d-flex justify-content-center gap-3">
            <a class="btn btn-primary" id="goGuidance">Go to Guidance Page</a>
            <button class="btn btn-secondary" id="retryBtn">Restart Quiz</button>
          </div>
        </div>
      `;

      const target = high ? HIGH_GUIDANCE_URL : LOW_GUIDANCE_URL;

      document.getElementById('goGuidance').addEventListener('click', (e)=>{
        e.preventDefault(); if(target){ window.location.href = target; }
      });
      document.getElementById('retryBtn').addEventListener('click', ()=>{ location.reload(); });

      if(AUTO_REDIRECT && target){
        setTimeout(()=>
          window.location.href = target,4000); // Redirect after 4 seconds
      }
      clearInterval(t);
    }

    // Timer
    let remaining = QUIZ_MINUTES * 60; // seconds
    function updateTimer(){
      const m = Math.floor(remaining/60).toString().padStart(2,'0');
      const s = Math.floor(remaining%60).toString().padStart(2,'0');
      $('#timer').textContent = `${m}:${s}`;
      if(remaining<=0){
        clearInterval(t);
        finish();
        return;
      
      }
      remaining--;
    }

    // init
    render();
    updateTimer();
    const t = setInterval(updateTimer,1000);
  </script>
</body>
</html>